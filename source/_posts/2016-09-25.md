---
title: '文字游戏引擎试用心得'
date: 2016-09-05
category: 荒于嬉
tags:
- 测评感想
---
> 最近，因为一些技术和个人方面的原因，必须换一个制作工具。由于我目前做的游戏还是文字类居多，开发经验也浅薄，所以首要需求是：易上手+易出原型+扩展性强+支持mac+发布平台多。基于这样的原则，试用了以下几个轻量级引擎。
> 注意，一切评价皆出于主观。

<!--more-->

## Ren'py
基于 python 的文字游戏引擎，在英语文化圈很流行，和 kirikiri 在国内的地位类似。

#### 支持平台
开发：win/linux/osx
发布：win/linux/osx/ios/android

#### 上手体验
非常简单。
对于接触过其他文字游戏引擎的开发者来说，除了 UI customization 不太好理解外，其他功能几乎都是直觉性的。然而一旦找到 UI 的定义文件在哪里，就很容易做出修改。
引擎本身带一个启动器，能调出项目的各个资料夹（虽然很不方便）。教程本身就是一个范例游戏。

#### 剧本编辑
单独列出这点，是为了满足我在剧情逻辑方面的特(bian)殊(tai)需求。
以前用过 choiceofscript，不说了，都是泪啊，满页都是 goto。作为更成熟的引擎，ren'py 拥有 call stack，而且可以简单 pass 参数，实在令人欣慰。

#### 整体性
没有图形化界面统一管理资源，因此需要在各个资料夹之间跳来跳去……

#### 亮点和弊端
亮点：
- ruby text! 支持在文本上方显示小字（就像日语假名标注）！可以方便地制作名词解释了。
- 大量贴心的日式 nvl 演出，包括天气、动画等。

弊端：
- 不得不说自带界面实在太丑了，对我这种强迫症来说是灾难。

#### 易扩展性
已经看到了国外大神做出了下列系统：
- rpg（ 战斗，装备，物品，地图……）
- 复杂的养成
- tiled map（使用 viewport）

还可以接入 live2d，可以说是很完备了。

#### 社区
官方自带详尽文档和社区。
另外，在 tumblr 欧美迷妹圈内很流行，因此还发掘了几个不错的素材站。
总体而言，宅的气息比较浓厚，和国内同人游戏圈很接近啊……

## Fungus
一个 unity 3d 的文字游戏插件，一度流行。基于 C#+lua，用 moonsharp 翻译。

#### 支持平台
和 unity3d 一致。

#### 上手体验
首先声明我是没用过 unity3d 的，但在强行摸索这个插件的过程中也算是懂了一点点。
看来 fungus 的主要贡献就是提供了简便可自定义的文字演出效果。场景逻辑包括呼出菜单全部用 flowchart 控制，而图像控制则交给了画布+摄像机。
在自定义方面，可以看到 console 的设置项目非常详尽，给制作者无限可能性。插入骨骼动画也不是很难。
由于研究不够深入，我没法描述这里面可能会出现的坑，更没法做进一步介绍。恐怕要使用这个插件做出比较精良的游戏，还是需要对 unity3d 的整体了解吧。

#### 剧本编辑
一切剧本逻辑都是放在 flowchart 里的，这点比 ren'py 更清晰，但缺乏层级结构。（比如，一个事件库下辖几个小事件的情况，就很难归类。）
另外，剧本文字可以导出为 txt，编辑后再导入。其实我不太喜欢这种方式，但总比在编辑器里制作更方便一些。

#### 整体性
unity3d 的整体性大家都知道的，资源管理器初看杂乱，其实很方便……整体架构一目了然。很适合我这样系统、美术、剧本、数值全线开工的开发者。

#### 亮点和弊端
弊端：
- 就我自己而言，不太想为了换引擎而特意去学习 lua。
- 流程控制有点杂乱。

#### 易扩展性
这就不用说了吧，用户可以自己修改源码，或搭配其他 asset，一切只看用户的能力了。

#### 社区
槽点所在！
首先，我一直没有找到官方的在线详尽文档……
论坛架设在 muut 上，倒还可以一看。大部分教程却都是 youtube 视频，太不方便查找了。
总的来说，这是一个缺乏文档和稳定社区的贫瘠世界，大概主流用户都在 unity3d 社区里，而不是聚集于插件周围。

## Inkle
Sorcery, 八十天环游地球系列的开发者使用的文本工具。基于 C#，生成结果为 json 文件，提供 unity3d 套件。
战棋游戏 Banner Saga 的文本也是用它制作的。

#### 支持平台
和 unity3d 一致。也可以 parse 到其他工具中，或者 web 发布。

#### 上手体验 & 剧本逻辑
这两块难分难舍，我就放在一起写了。
严格来说，我觉得 inkle 算不上是个文字游戏制作工具，而更像是剧本管理器。
inkle 包含 ink（语言）和 inky（原生编辑器）。inky 最棒的地方是即时预览，所见即所得。左边窗格写作，右边可以直接测试，还有资源管理窗格。官方提供的语法文档虽然不多（只有1个），但基本功能都覆盖了，也很容易上手，和 markup 类语言接近，通过 label 控制流程。相比前面介绍的工具，其文本标记功能极其强大。
自带的效果很优雅，是我见过的最漂亮的纯文字游戏界面。另外官方还发明了一套术语，用于形容游戏流程和标记效果：
+ Knot（绳结）：一小段游戏内容。
+ Divert（变道）：从一个绳结连向另一个绳结。
+ Glue（黏合）：去除换行符。（这个功能可以用于连接选项前后的文字。）
+ Branching（分支）：剧情分歧。
+ Joining（汇聚）：剧情汇合。
+ Stitch（针脚）：绳结下的子区块，用于控制显示条件等。
+ Sticky Choices（粘性选项）：永远固定存在的选项。一般选项默认选择后消失。
+ Weave（编织）：在选项下写出细小的分支，而不用单独创造绳结。文档作者形容为：“编织就好像一泄如注的文本流，永远自上向下，没有复杂易错的逻辑。”
+ Gather（收束）：把编织带来的分支收拢在一起。
+ Node（节点）：选项内连续嵌入多个子选项时，当中的收束被称作节点。
+ Tunnel（隧道）：可以在其他地方呼叫的子剧情。
+ Thread（绳束）：管理大量的分支，比如在一个房间里和随机出现的人对话。
……

还有些很有趣的 feature，比如：
+ 标签名（绳结，针脚名等）其实是 int 变量，存储了到达该剧情段的次数。因此也可以用来做 bool 判断……
+ 语料库（list）拥有四种显示模式：顺序，循环，阅后即焚和完全随机。
+ 语料库的项目可以嵌套、空白、用于选项等。
+ 大部分标签都可以起名。（包括上文提到的选项、收束。）
……

光文字介绍这个特立独行的工具实在无法表达我的惊叹之情，直接截图好了：

{% fi /media/inky.png, alt, inky %}

上面是官方提供的打地鼠范例，可以看出，对随机语料的支持很不错。打地鼠的每个选项都是由语句碎片随机生成的。
然而在一时的激动过后，问题来了。作为一个纯文字游戏工具，inkle中只能插入有限的插图，且不能控制格式。其实它被设计出来的初衷，是为了导入一个更强大的引擎，而且如何在 unity 中使用的文档是开发者在一个制作组的要求下专门写的……
官网提供一个 demo 的下载，打开看了一下，并不复杂，效果也简单。熟悉 json parsing 的开发者可以考虑一下。
多说一句，我理想中的文字游戏制作工具，应该就是 ren'py 和 inkle 的结合。

#### 整体性
专注于文本、逻辑，其他功能（几乎）没有。

#### 亮点和弊端
亮点：
- 优雅，充满情怀
- 令人眼花缭乱的标记
- 简单利落的编辑器和导出过程

弊端：
- 基本只适用于中高端开发

#### 易扩展性
非常高，可以胜任任何游戏类型的文本管理。
与其说是 inkle 具有扩展性，还不如说具有适配性……

#### 社区
这个可以说是完全没有了。文档虽然详尽，只有可怜的几份，我已经翻来覆去看完。和 fungus 一样，大部分人拿来直接用于 unity 开发。Github 上搜索半天，也只有几个 repo，提供了相关 unity GUI 套件等。
但是如果写信给 inkle 制作组，说不定能获得一份“定制文档”呢。
（未完待续）

